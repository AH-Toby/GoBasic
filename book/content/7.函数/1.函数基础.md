# 函数基础

## 1.函数存在的意义？

函数是组织好的、可重复使用的、用于执行指定任务的代码块，他是一段代码的封装。

把一段逻辑抽象出来封装到一个函数中，给他起一个名字，每次用到他的时候直接函数名调用就可以了。

使用函数能够让代码结构更清晰，更简洁。

## 2.函数的定义

Go语言中定义函数使用`func`关键字，具体格式如下：

```go
func 函数名(参数)(返回值){
    函数体
}
```

其中：

- **函数名：**由**字母、数字、下划线**组成。**但函数名的第一个字母不能是数字。在同一个包内，函数名也称不能重名。**
- **参数：**参数由参数变量和参数变量的类型组成，多个参数之间使用`,`分隔。
- **返回值：**返回值由返回值变量和其变量类型组成，也可以只写返回值的类型，多个返回值必须用`()`包裹，并用`,`分隔。
- **函数体：**实现指定功能的代码块。

```go
func sum(x int,y int)(ret int){
	ret = x+y
	return
}
```



## 3.函数的类型

###  3.1.有参无返

**格式：**

```go
func 函数名(参数){
    函数体
}
```

```go
func sum1(x int,y int){
	ret := x+y
	fmt.Println(ret)
}
```

### 3.2.无参有返

**格式：**

```go
func 函数名()(返回值){
    函数体
}
```

```go
func sum2() int{
	ret := 1+1
	return ret
}
```

### 3.3.无参无返

**格式：**

```go
func 函数名(){
    函数体
}
```

```go
func sum3(){
	fmt.Println("函数运行了")
}
```



### 3.4.返回值命名和返回值不命名

返回值可以命名也可以不命名

命名的返回值就相当于在函数中声明一个变量

使用命名返回值return后可省略

#### 3.4.1.返回值不命名函数

**格式：**

```go
func 函数名(参数) 返回值类型 {
    函数体
}
```

```go
func sum4(x int, y int ) int{
	ret := x+y
	return ret
}
```

#### 3.4.2.返回值命名函数

```go
func 函数名(参数)(返回值 返回值类型){
    函数体
}
```

```go
// 相当于在函数中申明一个变量ret
func sum5(x int, y int ) (ret int){
	ret = x+y
	return  // 使用命名返回值return后可省略
}
```



### 3.5.多个返回值

**格式：**

```go
func 函数名(参数) (返回值1,返回值2) {
    函数体
}
```

```go
func sum6(x int, y int) (int, string) {
	ret := x + y
	retName := "综和是"
	return ret,retName
}
```



### 3.6.参数类型的简写

当参数中连续的几个参数类型一致时，我们可以将前面的那个参数的类型省略。

**格式：**

```go
func 函数名(参数1,参数2，参数n 参数类型) (返回值1,返回值2) {
    函数体
}
```

```go
func sum7(x, y int) int {
	ret := x + y
	return ret
}
```



### 3.7.可变长参数

**可变长参数必须放在函数参数的最后**

**格式：**

```go
func 函数名(参数1 参数1数据类型,参数2... 参数1数据类型) (返回值1,返回值2) {
  函数体
}
```

```go
func sum8(x int, y ...int){
	fmt.Println(x)
	fmt.Println(y)
}
```

> **注意：**Go语言中函数没有默认参数这个概念



## 4.函数的调用

**格式：**

```go
函数名()
```

```go
package main

import "fmt"

func sum8(x int ,y ...int){
	fmt.Println(x)
	fmt.Println(y)
}
func main() {
	sum8(1, 2, 3, 4, 5, 6, 7)
}
```

> 注意，调用有返回值的函数时，可以不接收其返回值。



## 5. 函数参数

## 5.1.类型简写

函数的参数中如果相邻变量的类型相同，则可以省略类型，例如：

```go
func intSum(x, y int) int {
	return x + y
}
```

上面的代码中，`intSum`函数有两个参数，这两个参数的类型均为`int`，因此可以省略`x`的类型，因为`y`后面有类型说明，`x`参数也是该类型。

### 5.2 可变参数

可变参数是指函数的参数数量不固定。Go语言中的可变参数通过在参数名后加`...`来标识。

**注意：可变参数通常要作为函数的最后一个参数。**

```go
func intSum2(x ...int) int {
	fmt.Println(x) //x是一个切片
	sum := 0
	for _, v := range x {
		sum = sum + v
	}
	return sum
}
```



### 6.返回值

Go语言中通过`return`关键字向外输出返回值。

#### 6.1.多返回值

Go语言中函数支持多返回值，函数如果有多个返回值时**必须用`()`**将所有返回值包裹起来。

```go
func calc(x, y int) (int, int) {
	sum := x + y
	sub := x - y
	return sum, sub
}
```

#### 6.2.返回值命名

函数定义时可以给返回值命名，并在函数体中直接使用这些变量，最后通过`return`关键字返回。

例如：

```go
func calc(x, y int) (sum, sub int) {
	sum = x + y
	sub = x - y
	return
}
```

#### 6.3.返回值补充

当我们的一个函数返回值类型为slice时，nil可以看做是一个有效的slice，没必要显示返回一个长度为0的切片。

```go
func someFunc(x string) []int {
	if x == "" {
		return nil // 没必要返回[]int{}
	}
	...

```

